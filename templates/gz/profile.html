{% extends "gz/base.html" %} {% load static %} {% block head %} <link rel="stylesheet" href="{% static "gz/styles/profile.css" %}"> {% endblock head %} {% block header %} {% include 'gz/components/navigation.html' %} {% block title %} <title>GameZone | Profil</title> {% endblock title %} {% endblock header %} {% block main %} <div class="container"> <div class="sidebar"> <ul> <li onclick="showContent('profile')" class="tab active-tab"><i class="fa-solid fa-user"></i> Profil</li> <li onclick="showContent('orders')" class="tab"><i class="fa-solid fa-boxes-stacked"></i> Commandes</li> <li onclick="showContent('receipts')" class="tab"><i class="fa-solid fa-receipt"></i> Reçus</li> <li onclick="showContent('addresses')" class="tab"><i class="fa-solid fa-location-dot"></i> Adresses</li> </ul> </div> <div class="content"> <div class="profile active"> <h1>Profil</h1> <form id='profile-form' method="POST" enctype="multipart/form-data">{% csrf_token %}<div class="profile-settings"><div class="label-input"><label for="first_name">Prénom</label>{{profileForm.first_name}}</div><div class="label-input"><label for="last_name">Nom</label>{{profileForm.last_name}}</div><div class="label-input"><label for="email">Email</label>{{profileForm.email}}</div><div class="label-input"><label for="tel">Téléphone</label>{{profileForm.tel}}</div><div class="label-input"><label for="date_of_birth">Date de naissance</label>{{profileForm.date_of_birth}}</div></div><button id="save-button" type="submit">Enregistrer les modifications</button><div>Points GZ : {{user.customuser.points}}</div><p id="popupmessage"></p></form> </div> <div class="orders" id='orders'> <h1>Commandes</h1> <ul>{% if orders %}{% for order in orders %}<li class="order-list"><div class="order-box"><img src="{% static "gz/assets\qr-code-scan.png" %}" alt="Image de la commande"><div class="order-details"><p>ID de commande : <span>{{ order.id }}</span></p><p>Prix total : <span>DT {{ order.price }}</span></p>{% if order.status == 'pending' %}<p>Statut : <span class="pending">En attente</span></p><br>{% elif order.status == 'completed' %}<p>Statut : <span class="completed">Terminé</span></p><br>{% else %}<p>Statut : <span class="cancelled">Annulé</span></p><br>{% endif %}</div></div><div class="order-items"><h3 class="items-title">Articles :</h3><ul class="order-items">{% for item in order.order_items.all %}<li>{{ item.product.title }} x {{ item.quantity }}</li>{% endfor %}</ul></div>{% if order.status == 'pending' %}<div class="order-cancel"><button data-orderId="{{order.id}}" class="cancel-button"><i class="fa-solid fa-xmark"></i> Annuler</button></div>{% endif %}</li><hr>{% endfor %}{% else %}<div class="no-orders"><i class="fa-solid fa-cart-plus"></i><p>L'endroit semble vide.<br>Effectuez votre premier achat dès maintenant pour l'inclure dans cette liste.</p><button class="shop-now"><a href="{% url "catalog" %}">Acheter maintenant</a></button></div>{% endif %}</ul> </div> <div class="receipts"> <h1>Reçus</h1> <ul>{% for receipt in receipts %}<li>ID de reçu : {{ receipt.id }}, Utilisateur : {{ receipt.user }}, Date : {{ receipt.created_at }}</li><!-- Afficher d'autres détails du reçu si nécessaire -->{% endfor %}</ul> </div> <div class="addresses"> <h1>Carnet d'adresses</h1> <div class="addresses-container"><div class="address add-address"><i class="fa-solid fa-plus"></i><h2>Ajouter une adresse de livraison</h2></div>{% for address in addresses %}<div class="address" id="address-{{ address.id }}"><p>{{ address }}</p><div><button data-id="{{ address.id }}" class="edit-address-button">Modifier</button><button data-id="{{ address.id }}" class="delete-address-button edit-address-button">Supprimer</button></div></div>{% endfor %}</div><div class="add-address-container"><h1>Ajouter une adresse</h1><form class="addAddressForm">{% csrf_token %}<div><label for="address">Adresse</label>{{addressForm.line}}<div class="city-state-zip"><div><label for="city">Pays</label>{{addressForm.country}}</div><div><label for="state">Ville</label>{{addressForm.city}}</div><div><label for="zip">Code Postal</label>{{addressForm.zip_code}}</div></div><input class="add-address-button submit" type="submit" value="Ajouter une adresse"></div></form></div><div class="edit-address-container"><h1>Modifier l'adresse</h1><form class="edit-address-form" method="post">{% csrf_token %}<div><label for="address">Adresse</label>{{addressForm.line}}<div class="city-state-zip"><div><label for="city">Pays</label>{{addressForm.country}}</div><div><label for="state">Ville</label>{{addressForm.city}}</div><div><label for="zip">Code Postal</label>{{addressForm.zip_code}}</div></div><button id="save-changes-button" type="submit">Enregistrer les modifications</button></div></form></div></div> </div> </div> {% endblock main %} {% block footer %} {% endblock footer %} {% block scripts %} <script> function showContent(contentName){var contents=document.querySelectorAll('.content > div');var selectedTab=document.querySelector('.tab');for(var i=0;i<contents.length;i++){contents[i].classList.remove('active');}var selectedContent=document.querySelector('.'+contentName);document.addEventListener("click",function(event){if(event.target.classList.contains('tab')){selectedTab.classList.remove('active-tab');selectedTab=event.target;selectedTab.classList.add('active-tab');}});selectedContent.classList.add('active');}if("{{val}}"!="None"){showContent("{{val}}");}const form=document.querySelector("#profile-form");const submitButton=form.querySelector("#save-button");submitButton.addEventListener("click